# Default values for mlflow.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

replicaCount: 1

image:
  repository: # Image Repository
  pullPolicy: Always
  tag: 1.13.1 # Image version is sync to MLFlow Version

backendStore:
  postgres:
    username: # Database Username
    host: # Database Host
    port: # Database Port
    database: mlflow # Database Name
    secretName: postgres-credentials # k8 secret name that contains PG password

defaultArtifactRoot: # S3 bucket

# set true to expose prometheus
metrics:
  enabled: true
  metricsStoreDir: prometheus/metrics # Local directory that stores Prom metrics
  serviceMonitor:
    enabled: true # Enable ServiceMonitor Resource
    labels:
      release: kube-prometheus-stack

imagePullSecrets: []
nameOverride: mlflow
fullnameOverride: mlflow

# Service account with permission to access s3 bucket
serviceAccount:
  create: false
  annotations: {}
  name: "" 

service:
  type: ClusterIP
  port: 80

# Ingress settings
ingress:
  enabled: true
  annotations: # Depends on your ingress controller
    kubernetes.io/ingress.class: "nginx-internal"
    cert-manager.io/cluster-issuer: "letsencrypt"
  hosts:
    - host: mlflow.your-domain.com
      paths:
        - /
  tls:
    - secretName: mlflow-tls
      hosts:
        - mlflow.your-domain.com

resources:
  limits:
    cpu: 500m
    memory: 0.5Gi
  requests:
    cpu: 500m
    memory: 0.5Gi

autoscaling:
  enabled: false
  minReplicas: 1
  maxReplicas: 100
  targetCPUUtilizationPercentage: 80

podAnnotations: {}

podSecurityContext:
  {}

securityContext:
  {}
nodeSelector: {}

tolerations: []

affinity: {}
